<Page x:ConnectionId='1' x:Class="ImageOrganizer.GUI.Views.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
      xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
      xmlns:behaviors="using:Template10.Behaviors"
      xmlns:controls="using:Template10.Controls"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="using:ImageOrganizer.GUI"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:vm="using:ImageOrganizer.GUI.ViewModels"
      xmlns:converters="using:Template10.Converters" mc:Ignorable="d">

    <Page.DataContext>
        <vm:MainPageViewModel x:ConnectionId='2' x:Name="ViewModel" />
    </Page.DataContext>

    <Page.Resources>
        <local:SampleData x:ConnectionId='3' x:Name="DesignTimeData"/>
    </Page.Resources>

    <RelativePanel x:ConnectionId='4' x:Name="mainLayout" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" 
                   d:DataContext="{StaticResource DesignTimeData}">

        <controls:PageHeader x:ConnectionId='5' x:Name="pageHeader" Content="Organizer"
                             Background="LightSeaGreen"
                             HorizontalContentAlignment="Center"
                             RelativePanel.AlignLeftWithPanel="True"
                             RelativePanel.AlignRightWithPanel="True"
                             RelativePanel.AlignTopWithPanel="True" />

        <!--This panel contains the side menu-->
        <RelativePanel x:ConnectionId='6' x:Name="Menu"
                       RelativePanel.AlignLeftWithPanel="True"
                       RelativePanel.Below="pageHeader"
                       RelativePanel.AlignBottomWithPanel="True"
                       BorderBrush="Black"
                       BorderThickness="1"
                       Padding="8">

            <TextBlock x:ConnectionId='10' x:Name="FolderPath"
                Text="{Binding PathToFolder}"
                RelativePanel.AlignLeftWithPanel="True"
                RelativePanel.AlignRightWithPanel="True"
                Margin="0,8,0,0"
                Width="200"/>

            <Button x:ConnectionId='11' x:Name="BrowseForFolder"
                    Content="Browse"
                                                                  
                    RelativePanel.AlignRightWithPanel="True"
                    RelativePanel.Below="FolderPath"
                    Margin="8,8,0,0"/>

            <!-- Panel for manipulating picture and group properties-->
            <RelativePanel x:ConnectionId='12' x:Name="AddPicturePanel"
                           RelativePanel.AlignBottomWithPanel="True"
                           RelativePanel.AlignLeftWithPanel="True"
                           RelativePanel.AlignRightWithPanel="True">

                <!-- TEST BUTTON FOR ADDING PICTURES-->
                <Button x:ConnectionId='14' x:Name="AddPictureButton"
                    Content="Add Picture"
                                                                  
                    RelativePanel.AlignHorizontalCenterWithPanel="True"
                    Margin="0,0,0,100"/>

                <TextBox x:ConnectionId='15' x:Name="PictureName"
                         Width="200"
                         Text="{Binding CurrentPictureTitle, Mode=TwoWay}"
                         PlaceholderText="Title"
                         MaxLength="20"
                         RelativePanel.Below="AddPictureButton"/>

                <ComboBox x:ConnectionId='16' x:Name="ChooseGroupMenu"
                                                                    
                          SelectedItem="{Binding SelectedGroup, Mode=TwoWay}"
                          DisplayMemberPath="Name"
                          Margin="0,8,0,100"
                          PlaceholderText="Choose a group"
                          RelativePanel.Below="PictureName"/>

                <Button x:ConnectionId='17' x:Name="CreateGroup"
                        Content="New group"
                                                       
                        RelativePanel.Below="ChooseGroupMenu"
                        RelativePanel.AlignRightWithPanel="True"/>

            </RelativePanel>

            <!-- "Create new group" content dialog-->
            <ContentDialog x:ConnectionId='13' x:Name="AddGroupContentDialog"
                           PrimaryButtonText="Create" IsPrimaryButtonEnabled="{Binding IsValid}"
                           SecondaryButtonText="Cancel" IsSecondaryButtonEnabled="True">
                <ContentDialog.TitleTemplate>
                    <DataTemplate>
                        <TextBlock Text="Create a group" TextAlignment="Center"/>
                    </DataTemplate>
                </ContentDialog.TitleTemplate>
                <StackPanel Orientation="Horizontal" Padding="8">
                    <TextBlock Text="Name:" Margin="0,0,8,0"/>
                    <TextBox Text="{Binding Name, Mode=TwoWay}" PlaceholderText="Enter a name for a group"/>

                </StackPanel>
            </ContentDialog>

        </RelativePanel>
        
        <!--This panel contains the image viewing with navigation-->
        <RelativePanel x:ConnectionId='7' x:Name="imageView"
                       RelativePanel.RightOf="Menu"
                       RelativePanel.Below="pageHeader"
                       RelativePanel.AlignRightWithPanel="True"
                       RelativePanel.AlignBottomWithPanel="True">

            <TextBlock x:ConnectionId='8' x:Name="messageBoard"
                       Text="{Binding MessageBoardText}"
                       Margin="8,8,0,0"
                       RelativePanel.AlignTopWithPanel="True"
                       RelativePanel.AlignLeftWithPanel="true"/>

            <FlipView x:ConnectionId='9' x:Name="imageBlock" ItemsSource="{Binding PictureList}"
                                                                                                                         
                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                   RelativePanel.AlignBottomWithPanel="True"
                   RelativePanel.AlignTopWithPanel="True"
                   RelativePanel.AlignLeftWithPanel="True"
                   RelativePanel.AlignRightWithPanel="True"
                   Margin="50,100,50,100">
                <FlipView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical">
                            <TextBlock x:Name="currentTitle" Text="{Binding Title}" TextAlignment="Center"/>
                            <Image Source="{Binding CurrentImage}" Stretch="Uniform">
                            </Image>
                        </StackPanel>
                    </DataTemplate>
                </FlipView.ItemTemplate>
            </FlipView>

        </RelativePanel>

    </RelativePanel>

</Page>
 

